<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Retreat at Greenbriar</title>

  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- ğŸ” LOGIN GATE -->
<div id="loginScreen" class="loginWrap">
  <div class="loginBox">
    <h2>Secure Access</h2>

    <input id="loginEmail" type="email" placeholder="Email">
    <input id="loginPassword" type="password" placeholder="Password">

    <button class="btn full" id="loginBtn">Login</button>

    <p id="loginError" class="loginError hidden">
      Invalid email or password
    </p>
  </div>
</div>

<!-- ğŸ”“ APP ROOT (LOCKED UNTIL LOGIN) -->
<div id="appRoot" class="hidden">

  <div class="row between topSwitch">
    <div class="row">
      <label class="miniLabel">Property</label>
      <select id="propertySelect">
        <option value="1">Retreat at Greenbriar 1</option>
        <option value="2">Retreat at Greenbriar 2</option>
      </select>
    </div>

    <div class="row">
      <button class="btn ghost" id="pickFolderBtn">ğŸ“ Choose Save Folder</button>
      <button class="btn" id="saveFolderBtn">ğŸ’¾ Save Backup</button>
      <button class="btn ghost" id="logoutBtn">Logout</button>
    </div>
  </div>

  <header class="topbar">
    <div class="brand">
      <img src="rjames.jpg" class="logo">
      <div>
        <h1 id="propertyTitle">Retreat at Greenbriar</h1>
        <p class="sub">Make-Ready Manager</p>
      </div>
    </div>
  </header>

  <main class="wrap">

    <!-- MANAGER PANEL -->
    <section id="managerPanel" class="card hidden">
      <h2>Manager Settings</h2>

      <h3>Change Manager Password</h3>
      <input id="newManagerPassword" type="password" placeholder="New manager password">
      <button class="btn" id="updateManagerPwd">Update</button>

      <hr>

      <h3>Staff Users</h3>
      <div id="staffList"></div>
    </section>

    <section class="card">
      <h2>Add Unit</h2>
      <form id="unitForm" class="grid">
        <input name="unitNumber" placeholder="Unit #" required>

        <select name="status">
          <option>Vacant</option>
          <option selected>Not Ready</option>
          <option>Ready</option>
          <option>Occupied</option>
        </select>

        <input type="date" class="datePick" name="start">
        <textarea name="notes" placeholder="Unit notes" class="full"></textarea>

        <button class="btn full">Add Unit</button>
      </form>
    </section>

    <section class="card">
      <div class="row between">
        <h2>Units</h2>
        <input id="search" placeholder="Search anythingâ€¦">
      </div>
      <div id="unitList"></div>
    </section>

  </main>

</div>

<template id="unitTemplate">
  <article class="unit">
    <div class="row between">
      <h3 class="unitName"></h3>
      <div class="row">
        <span class="unitBadge hidden">âœ… COMPLETED</span>
        <button class="btn ghost small toggleDetails">Details</button>
        <button class="btn ghost small pdfBtn">PDF</button>
        <button class="btn success small markDone">Mark Unit Done</button>
        <button class="btn danger small deleteUnit">Delete</button>
      </div>
    </div>

    <p class="dates"></p>
    <p class="notes"></p>

    <section class="details hidden">
      <div class="row">
        <select class="taskPicker"></select>
        <input class="taskVendor" placeholder="Vendor / Staff">
        <input type="date" class="taskDate datePick">
        <select class="taskStatus">
          <option value="pending">Pending</option>
          <option value="done">Done</option>
        </select>
        <textarea class="taskNote" rows="2" placeholder="Task note"></textarea>
        <button class="btn ghost small addTask">Add Task</button>
      </div>

      <div class="tasks"></div>

      <label class="row">
        Work Finish Date
        <input type="date" class="finishDate datePick">
      </label>
    </section>
  </article>
</template>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="app.js"></script>

<script>
if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("./service-worker.js");
  });
}
</script>

</body>

<footer class="siteFooter">
  Mohabatullah Hakimi Â© 2025
</footer>
</html>
